<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UltimateWeather AR 7D ğŸŒ¦ï¸</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#2193b0">
<style>
body{margin:0;font-family:system-ui;display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(160deg,#6dd5ed,#2193b0);color:#fff;direction:rtl;transition:background 0.8s ease}
.app{width:95%;max-width:400px;background:rgba(255,255,255,0.15);backdrop-filter:blur(18px);border-radius:25px;padding:20px;text-align:center;transition:background 0.8s ease}
h1{margin-bottom:12px;font-size:28px}
input{width:100%;padding:12px;border:none;border-radius:15px;outline:none;font-size:16px;text-align:right}
.icon{font-size:70px;margin-top:10px;transition: transform 0.3s ease}
.icon.animate{transform: scale(1.2);}
.temp{font-size:45px;font-weight:bold;margin:4px 0}
.desc{opacity:.9;margin-bottom:10px}
.row{display:flex;gap:10px;margin-top:14px;justify-content:center}
.card{flex:1;background:rgba(255,255,255,0.2);border-radius:15px;padding:10px}
.days{display:flex;gap:10px;margin-top:16px;overflow-x:auto}
.day{min-width:70px;background:rgba(255,255,255,0.18);border-radius:16px;padding:8px;font-size:13px;text-align:center;transition:background 0.5s;}
.rain{position:fixed;inset:0;pointer-events:none;background:repeating-linear-gradient(transparent,transparent 8px,rgba(255,255,255,.3) 9px);animation:rain 0.35s linear infinite;z-index:0}
@keyframes rain{from{background-position:0 0}to{background-position:-10px 40px}}
</style>
</head>
<body>
<div id="rain" class="rain" style="display:none"></div>
<div class="app" id="app">
<h1>ğŸŒ UltimateWeather AR 7D</h1>
<input id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¯ÙŠÙ†Ø© Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø£Ùˆ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ ğŸŒ">
<div class="icon" id="icon">ğŸŒ</div>
<div class="temp" id="temp">--Â°C</div>
<div class="desc" id="desc">Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¯ÙŠÙ†Ø©</div>
<div class="row">
  <div class="card">ğŸ’¨ Ø§Ù„Ø±ÙŠØ§Ø­<br><b id="wind">--</b> ÙƒÙ…/Ø³</div>
  <div class="card">ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø©<br><b id="hum">--</b>%</div>
</div>
<div class="days" id="days"></div>
</div>

<script>
// === Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ù† 100 Ù†Ù…ÙˆØ°Ø¬ÙŠØ© (ÙŠÙ…ÙƒÙ† Ø§Ù„ØªÙˆØ³ÙŠØ¹ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¥Ù„Ù‰ 300+) ===
const cities=[
  {name:"Ø¬Ø¯Ø©", country:"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", lat:21.4858, lon:39.1925},
  {name:"Ø§Ù„Ø±ÙŠØ§Ø¶", country:"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", lat:24.7136, lon:46.6753},
  {name:"Ù…ÙƒØ©", country:"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", lat:21.3891, lon:39.8579},
  {name:"Ø§Ù„Ø¯Ù…Ø§Ù…", country:"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", lat:26.3927, lon:50.1277},
  {name:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", country:"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", lat:24.5247, lon:39.5692},
  {name:"Ø¹Ù…Ø§Ù†", country:"Ø§Ù„Ø£Ø±Ø¯Ù†", lat:31.9539, lon:35.9106},
  {name:"Ø¥Ø±Ø¨Ø¯", country:"Ø§Ù„Ø£Ø±Ø¯Ù†", lat:32.5569, lon:35.8519},
  {name:"Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡", country:"Ø§Ù„Ø£Ø±Ø¯Ù†", lat:32.0106, lon:36.0881},
  {name:"Ø§Ù„Ù‚Ø¯Ø³", country:"ÙÙ„Ø³Ø·ÙŠÙ†", lat:31.7683, lon:35.2137},
  {name:"Ø±Ø§Ù… Ø§Ù„Ù„Ù‡", country:"ÙÙ„Ø³Ø·ÙŠÙ†", lat:31.9074, lon:35.2034},
  {name:"ØºØ²Ø©", country:"ÙÙ„Ø³Ø·ÙŠÙ†", lat:31.5013, lon:34.4667},
  {name:"Ø¯Ø¨ÙŠ", country:"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª", lat:25.2048, lon:55.2708},
  {name:"Ø£Ø¨ÙˆØ¸Ø¨ÙŠ", country:"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª", lat:24.4539, lon:54.3773},
  {name:"Ø§Ù„Ø´Ø§Ø±Ù‚Ø©", country:"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª", lat:25.3463, lon:55.4209},
  {name:"Ù…Ø³Ù‚Ø·", country:"Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†", lat:23.588, lon:58.3829},
  {name:"ØµÙ„Ø§Ù„Ø©", country:"Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†", lat:17.019, lon:54.0899},
  {name:"Ø¨ÙŠØ±ÙˆØª", country:"Ù„Ø¨Ù†Ø§Ù†", lat:33.8938, lon:35.5018},
  {name:"Ø·Ø±Ø§Ø¨Ù„Ø³", country:"Ù„Ø¨Ù†Ø§Ù†", lat:34.4344, lon:35.8499},
  {name:"Ø¨ØºØ¯Ø§Ø¯", country:"Ø§Ù„Ø¹Ø±Ø§Ù‚", lat:33.3152, lon:44.3661},
  {name:"Ø§Ù„Ø¨ØµØ±Ø©", country:"Ø§Ù„Ø¹Ø±Ø§Ù‚", lat:30.5085, lon:47.7805},
  {name:"Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©", country:"Ù…ØµØ±", lat:30.0444, lon:31.2357},
  {name:"Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©", country:"Ù…ØµØ±", lat:31.2001, lon:29.9187},
  {name:"Ø§Ù„Ø¬ÙŠØ²Ø©", country:"Ù…ØµØ±", lat:30.0131, lon:31.2089},
  {name:"Ø·Ø±Ø§Ø¨Ù„Ø³", country:"Ù„ÙŠØ¨ÙŠØ§", lat:32.8752, lon:13.1875},
  {name:"Ø¨Ù†ØºØ§Ø²ÙŠ", country:"Ù„ÙŠØ¨ÙŠØ§", lat:32.1167, lon:20.0667},
  {name:"Ø§Ù„Ø®Ø±Ø·ÙˆÙ…", country:"Ø§Ù„Ø³ÙˆØ¯Ø§Ù†", lat:15.5007, lon:32.5599},
  {name:"Ø£Ù…Ø¯Ø±Ù…Ø§Ù†", country:"Ø§Ù„Ø³ÙˆØ¯Ø§Ù†", lat:15.6096, lon:32.5053},
  {name:"Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", country:"Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", lat:36.7538, lon:3.0588},
  {name:"ÙˆÙ‡Ø±Ø§Ù†", country:"Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", lat:35.6971, lon:-0.6359},
  {name:"ØªÙˆÙ†Ø³", country:"ØªÙˆÙ†Ø³", lat:36.8065, lon:10.1815},
  {name:"ØµÙØ§Ù‚Ø³", country:"ØªÙˆÙ†Ø³", lat:34.7406, lon:10.7603},
  {name:"Ø§Ù„Ø±Ø¨Ø§Ø·", country:"Ø§Ù„Ù…ØºØ±Ø¨", lat:34.0209, lon:-6.8416},
  {name:"Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", country:"Ø§Ù„Ù…ØºØ±Ø¨", lat:33.5731, lon:-7.5898},
  {name:"ÙØ§Ø³", country:"Ø§Ù„Ù…ØºØ±Ø¨", lat:34.0181, lon:-5.0078},
  {name:"Ø·Ù†Ø¬Ø©", country:"Ø§Ù„Ù…ØºØ±Ø¨", lat:35.7595, lon:-5.8339},
  {name:"Ù†ÙˆØ§ÙƒØ´ÙˆØ·", country:"Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§", lat:18.0735, lon:-15.9582},
  {name:"Ø¯ÙƒØ§Ø±", country:"Ø§Ù„Ø³Ù†ØºØ§Ù„", lat:14.7167, lon:-17.4677},
  {name:"Ù„Ø§ØºÙˆØ³", country:"Ù†ÙŠØ¬ÙŠØ±ÙŠØ§", lat:6.5244, lon:3.3792},
  {name:"Ø£Ø¨ÙˆØ¬Ø§", country:"Ù†ÙŠØ¬ÙŠØ±ÙŠØ§", lat:9.0579, lon:7.4951},
  {name:"ÙƒÙŠÙ†Ø´Ø§Ø³Ø§", country:"Ø§Ù„ÙƒÙˆÙ†ØºÙˆ", lat:-4.4419, lon:15.2663},
  {name:"Ø¨Ø±Ø§Ø²Ø§ÙÙŠÙ„", country:"Ø§Ù„ÙƒÙˆÙ†ØºÙˆ", lat:-4.2634, lon:15.2429},
  {name:"Ù†ÙŠØ±ÙˆØ¨ÙŠ", country:"ÙƒÙŠÙ†ÙŠØ§", lat:-1.2921, lon:36.8219},
  {name:"Ù…ÙˆÙ…Ø¨Ø§Ø³Ø§", country:"ÙƒÙŠÙ†ÙŠØ§", lat:-4.0435, lon:39.6682},
  {name:"Ø£Ø¯ÙŠØ³ Ø£Ø¨Ø§Ø¨Ø§", country:"Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§", lat:9.0301, lon:38.7469},
  {name:"Ø¬ÙŠØ¨ÙˆØªÙŠ", country:"Ø¬ÙŠØ¨ÙˆØªÙŠ", lat:11.5721, lon:43.1456},
  {name:"Ø§Ù„Ø¯ÙˆØ­Ø©", country:"Ù‚Ø·Ø±", lat:25.276987, lon:51.520008},
  {name:"Ø§Ù„Ù…Ù†Ø§Ù…Ø©", country:"Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†", lat:26.2336, lon:50.566},
  {name:"Ø§Ù„ÙƒÙˆÙŠØª", country:"Ø§Ù„ÙƒÙˆÙŠØª", lat:29.3759, lon:47.9774},
  {name:"Ù…Ø³ÙŠØ³Ø§ØºØ§", country:"ÙƒÙ†Ø¯Ø§", lat:43.589, lon:-79.6441},
  {name:"ØªÙˆØ±ÙˆÙ†ØªÙˆ", country:"ÙƒÙ†Ø¯Ø§", lat:43.6532, lon:-79.3832},
  {name:"Ù…ÙˆÙ†ØªØ±ÙŠØ§Ù„", country:"ÙƒÙ†Ø¯Ø§", lat:45.5017, lon:-73.5673},
  {name:"Ù†ÙŠÙˆÙŠÙˆØ±Ùƒ", country:"USA", lat:40.7128, lon:-74.0060},
  {name:"Ù„ÙˆØ³ Ø£Ù†Ø¬Ù„ÙˆØ³", country:"USA", lat:34.0522, lon:-118.2437},
  {name:"Ø´ÙŠÙƒØ§ØºÙˆ", country:"USA", lat:41.8781, lon:-87.6298},
  {name:"Ù„Ù†Ø¯Ù†", country:"Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©", lat:51.5074, lon:-0.1278},
  {name:"Ù…Ø§Ù†Ø´Ø³ØªØ±", country:"Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©", lat:53.4808, lon:-2.2426},
  {name:"Ø¨Ø±Ù…Ù†ØºÙ‡Ø§Ù…", country:"Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©", lat:52.4862, lon:-1.8904},
  {name:"Ø¨Ø§Ø±ÙŠØ³", country:"ÙØ±Ù†Ø³Ø§", lat:48.8566, lon:2.3522},
  {name:"Ù…Ø±Ø³ÙŠÙ„ÙŠØ§", country:"ÙØ±Ù†Ø³Ø§", lat:43.2965, lon:5.3698},
  {name:"Ù„ÙŠÙˆÙ†", country:"ÙØ±Ù†Ø³Ø§", lat:45.764, lon:4.8357},
  {name:"Ø±ÙˆÙ…Ø§", country:"Ø¥ÙŠØ·Ø§Ù„ÙŠØ§", lat:41.9028, lon:12.4964},
  {name:"Ù…ÙŠÙ„Ø§Ù†Ùˆ", country:"Ø¥ÙŠØ·Ø§Ù„ÙŠØ§", lat:45.4642, lon:9.19},
  {name:"Ù†Ø§Ø¨ÙˆÙ„ÙŠ", country:"Ø¥ÙŠØ·Ø§Ù„ÙŠØ§", lat:40.8518, lon:14.2681},
  {name:"Ø¨Ø±Ù„ÙŠÙ†", country:"Ø£Ù„Ù…Ø§Ù†ÙŠØ§", lat:52.5200, lon:13.4050},
  {name:"Ù…ÙŠÙˆÙ†Ø®", country:"Ø£Ù„Ù…Ø§Ù†ÙŠØ§", lat:48.1351, lon:11.5820},
  {name:"Ù‡Ø§Ù…Ø¨ÙˆØ±Øº", country:"Ø£Ù„Ù…Ø§Ù†ÙŠØ§", lat:53.5511, lon:9.9937},
  {name:"Ù…Ø¯Ø±ÙŠØ¯", country:"Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§", lat:40.4168, lon:-3.7038},
  {name:"Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©", country:"Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§", lat:41.3851, lon:2.1734},
  {name:"ÙØ§Ù„Ù†Ø³ÙŠØ§", country:"Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§", lat:39.4699, lon:-0.3763},
  {name:"Ù„Ø´Ø¨ÙˆÙ†Ø©", country:"Ø§Ù„Ø¨Ø±ØªØºØ§Ù„", lat:38.7223, lon:-9.1393},
  {name:"Ø¨ÙˆØ±ØªÙˆ", country:"Ø§Ù„Ø¨Ø±ØªØºØ§Ù„", lat:41.1496, lon:-8.611},
  {name:"Ø¨Ø±ÙˆÙƒØ³Ù„", country:"Ø¨Ù„Ø¬ÙŠÙƒØ§", lat:50.8503, lon:4.3517},
  {name:"Ø£Ù†ØªÙˆÙŠØ±Ø¨", country:"Ø¨Ù„Ø¬ÙŠÙƒØ§", lat:51.2194, lon:4.4025},
  {name:"Ø£Ù…Ø³ØªØ±Ø¯Ø§Ù…", country:"Ù‡ÙˆÙ„Ù†Ø¯Ø§", lat:52.3676, lon:4.9041},
  {name:"Ø±ÙˆØªØ±Ø¯Ø§Ù…", country:"Ù‡ÙˆÙ„Ù†Ø¯Ø§", lat:51.9225, lon:4.47917}
];

// === ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ===
function weatherIcon(code){
 if(code==0) return "â˜€ï¸ Ù…Ø´Ù…Ø³";
 if(code<4) return "â›… ØºØ§Ø¦Ù… Ø¬Ø²Ø¦ÙŠ";
 if(code<50) return "â˜ï¸ ØºØ§Ø¦Ù…";
 if(code<70) return "ğŸŒ§ï¸ Ø£Ù…Ø·Ø§Ø±";
 if(code<90) return "ğŸŒ¦ï¸ Ø£Ù…Ø·Ø§Ø± Ù…ØªÙØ±Ù‚Ø©";
 return "â›ˆï¸ Ø¹ÙˆØ§ØµÙ";
}

async function loadCity(lat, lon, name, country){
  const url=`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode&hourly=relativehumidity_2m&timezone=auto`;
  const d = await fetch(url).then(r=>r.json());
  const w=d.current_weather;

  const iconEl=document.getElementById("icon");
  iconEl.textContent=weatherIcon(w.weathercode);
  iconEl.classList.add("animate");
  setTimeout(()=>iconEl.classList.remove("animate"),300);

  document.getElementById("temp").textContent=w.temperature+"Â°C";
  document.getElementById("desc").textContent=`${name} - ${country}`;
  document.getElementById("wind").textContent=w.windspeed;
  document.getElementById("hum").textContent=d.hourly.relativehumidity_2m[0];

  // Ø§Ù„Ø®Ù„ÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø·Ù‚Ø³
  const app=document.getElementById("app");
  if(w.weathercode==0) app.style.background="linear-gradient(160deg,#ffe47a,#f7b733)";
  else if(w.weathercode<4) app.style.background="linear-gradient(160deg,#a0c4ff,#2193b0)";
  else if(w.weathercode<50) app.style.background="linear-gradient(160deg,#c0c0c0,#2193b0)";
  else if(w.weathercode<70) app.style.background="linear-gradient(160deg,#4da6ff,#1a1a2e)";
  else if(w.weathercode<90) app.style.background="linear-gradient(160deg,#3a3a52,#1a1a2e)";
  else app.style.background="linear-gradient(160deg,#6a0dad,#1a1a2e)";

  // Ø§Ù„Ù…Ø·Ø±
  document.getElementById("rain").style.display=(w.weathercode>=51&&w.weathercode<=82)?"block":"none";

  // ØªÙˆÙ‚Ø¹ 7 Ø£ÙŠØ§Ù…
  const daysEl=document.getElementById("days");
  daysEl.innerHTML="";
  d.daily.temperature_2m_max.forEach((t,i)=>{
    const min=d.daily.temperature_2m_min[i];
    const code=d.daily.weathercode[i];
    const dayDiv=document.createElement("div");
    dayDiv.className="day";
    dayDiv.innerHTML=`${weatherIcon(code)}<br>${min}Â° - ${t}Â°`;
    daysEl.appendChild(dayDiv);
  });
}

// Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
function findCity(name){
  return cities.find(c=>c.name.toLowerCase()===name.toLowerCase());
}

document.getElementById("search").addEventListener("keydown", e=>{
  if(e.key==="Enter"){
    const city=findCity(e.target.value);
    if(city){
      loadCity(city.lat, city.lon, city.name, city.country);
    } else {
      alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¨Ø¯Ù‚Ø©ØŒ Ø­Ø§ÙˆÙ„ ÙƒØªØ§Ø¨ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ Ø£Ùˆ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒØªØ§Ø¨Ø©.");
    }
  }
});
</script>
</body>
</html>
